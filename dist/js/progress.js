!function(t){function e(){this.durTime=0,this.frameId=0,this.startTime=0,this.lastPercent=0,this.init()}function i(t){this.obj=t,this.stratPointX=0,this.startleft=0,this.percent=0,this.init()}e.prototype={init(){this.getDom()},getDom(){this.curTime=document.querySelector(".curTime"),this.circle=document.querySelector(".circle"),this.frontBg=document.querySelector(".frontBg"),this.totalTime=document.querySelector(".totalTime")},renderAlltime(t){this.durTime=t,t=this.formatTime(t),this.totalTime.innerHTML=t},formatTime(t){t=Math.round(t);let e=Math.floor(t/60),i=t%60;return e=e<10?"0"+e:e,i=i<10?"0"+i:i,e+":"+i},move(t,e){let i=this;console.log(i),this.lastPercent=void 0===t?this.lastPercent:t,this.startTime=(new Date).getTime(),cancelAnimationFrame(this.frameId),function t(){let r=(new Date).getTime(),s=i.lastPercent+(r-i.startTime)/(1e3*i.durTime);s<=1?i.update(s,e):(console.log("停止了"),cancelAnimationFrame(i.frameId),player.musicPlay.isAuto()),i.frameId=requestAnimationFrame(t)}()},update(t,e){let i=this.formatTime(t*this.durTime);if(this.curTime.innerHTML=i,this.frontBg.style.width=100*t+"%",e)return;let r=t*this.circle.parentNode.offsetWidth;this.circle.style.transform="translateX("+r+"px)"},stop(){cancelAnimationFrame(this.frameId);let t=(new Date).getTime();return this.lastPercent+=(t-this.startTime)/(1e3*this.durTime),this.lastPercent}},i.prototype={init(){console.log("拖拽开始");let t=this;this.obj.style.transform="translateX(0)",this.obj.addEventListener("touchstart",(function(e){t.stratPointX=e.changedTouches[0].pageX,t.startleft=parseFloat(this.style.transform.split("(")[1]),t.start&&t.start()})),this.obj.addEventListener("touchmove",(function(e){t.dispointX=e.changedTouches[0].pageX-t.stratPointX;let i=t.startleft+t.dispointX;i<0?i=0:i>this.offsetParent.offsetWidth&&(i=this.offsetParent.offsetWidth),this.style.transform="translateX("+i+"px)",t.parcent=i/this.offsetParent.offsetWidth,t.move&&t.move(t.parcent)})),this.obj.addEventListener("touchend",(function(e){t.end&&t.end(t.parcent)}))}},t.progress={pro:function(){return new e},drag:function(t){return new i(t)}}}(window.player||(window.player={}));